<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Particle Field - Enhanced Preview</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #000;
      color: #fff;
      overflow: hidden;
    }

    .demo-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    /* Particle background */
    #particleCanvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    /* Content overlay */
    .content {
      position: relative;
      z-index: 10;
      text-align: center;
      max-width: 900px;
      padding: 0 2rem;
    }

    .logo-container {
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 4rem;
    }

    .arabic-logo {
      font-size: 3.5rem;
      font-weight: bold;
      font-family: 'Amiri', serif;
    }

    .english-logo {
      font-size: 4.5rem;
      font-weight: 300;
      text-transform: lowercase;
      letter-spacing: -0.05em;
    }

    .subtitle {
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.3em;
      color: #a8a29e;
      margin-bottom: 4rem;
    }

    .cta-button {
      padding: 1rem 3rem;
      border: 1px solid #fff;
      background: transparent;
      color: #fff;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.25em;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .cta-button:hover {
      background: #fff;
      color: #000;
    }

    .hint {
      margin-top: 3rem;
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      color: #57534e;
    }

    /* Walkthrough preview */
    .walkthrough-preview {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .walkthrough-preview.active {
      display: flex;
    }

    .walkthrough-card {
      max-width: 800px;
      background: rgba(28, 25, 23, 0.9);
      backdrop-filter: blur(12px);
      border: 1px solid #44403c;
      border-radius: 2px;
      padding: 4rem;
      margin: 0 2rem;
      position: relative;
      animation: slideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .close-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: #a8a29e;
      font-size: 1.5rem;
      cursor: pointer;
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s;
    }

    .close-button:hover {
      background: rgba(68, 64, 60, 0.5);
      color: #fff;
    }

    .particle-icon {
      width: 6rem;
      height: 6rem;
      margin: 0 auto 2rem;
    }

    .step-title {
      font-size: 2.5rem;
      font-weight: 300;
      margin-bottom: 0.5rem;
      letter-spacing: 0.02em;
    }

    .step-title-ar {
      font-family: 'Amiri', serif;
      font-size: 1.25rem;
      opacity: 0.6;
      margin-bottom: 2rem;
    }

    .step-description {
      font-size: 1.25rem;
      line-height: 1.8;
      font-weight: 300;
      color: #d6d3d1;
      margin-bottom: 1rem;
    }

    .step-description-ar {
      font-family: 'Amiri', serif;
      font-size: 1rem;
      opacity: 0.5;
      line-height: 1.9;
    }

    .progress-chain {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      margin: 2rem 0;
    }

    .progress-dot {
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background: #57534e;
      transition: all 0.5s;
    }

    .progress-dot.active {
      width: 1rem;
      height: 1rem;
      background: #fff;
    }

    .progress-line {
      width: 2rem;
      height: 2px;
      background: #44403c;
      transition: all 0.5s;
    }

    .progress-line.filled {
      background: #fff;
    }

    .nav-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }

    .nav-button {
      flex: 1;
      padding: 0.875rem 1.5rem;
      border: 1px solid #44403c;
      background: transparent;
      color: #fff;
      font-size: 1rem;
      font-weight: 300;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: all 0.3s;
    }

    .nav-button:hover {
      background: rgba(68, 64, 60, 0.5);
    }

    .nav-button.primary {
      background: #fff;
      color: #000;
      border-color: #fff;
    }

    .nav-button.primary:hover {
      background: #d6d3d1;
    }

    .info-panel {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      padding: 1.5rem;
      border: 1px solid #44403c;
      border-radius: 4px;
      max-width: 400px;
      font-size: 0.875rem;
      line-height: 1.6;
    }

    .info-panel h3 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
      color: #fff;
    }

    .info-panel ul {
      list-style: none;
      padding: 0;
    }

    .info-panel li {
      color: #a8a29e;
      margin-bottom: 0.5rem;
    }

    .info-panel li:before {
      content: "→ ";
      color: #57534e;
    }

    @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
  </style>
</head>
<body>
  <!-- Main Splash Screen -->
  <div id="splash" class="demo-container">
    <canvas id="particleCanvas"></canvas>

    <div class="content">
      <div class="logo-container">
        <span class="arabic-logo">بالعربي</span>
        <span class="english-logo">poetry</span>
      </div>

      <div class="subtitle">
        Verses Connecting Across Time and Space
      </div>

      <button class="cta-button" onclick="showWalkthrough()">
        Enter
      </button>

      <div class="hint">
        Move your cursor to disturb the field
      </div>
    </div>
  </div>

  <!-- Walkthrough Preview -->
  <div id="walkthrough" class="walkthrough-preview">
    <canvas id="walkthroughCanvas" style="position: absolute; inset: 0; opacity: 0.3;"></canvas>

    <div class="walkthrough-card">
      <button class="close-button" onclick="closeWalkthrough()">✕</button>

      <!-- Particle cluster icon -->
      <svg class="particle-icon" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="4" fill="#fff" opacity="0.9"/>
        <g id="orbiting-particles"></g>
      </svg>

      <div style="text-align: center;">
        <h2 class="step-title" id="stepTitle">Particles of Wisdom</h2>
        <p class="step-title-ar" id="stepTitleAr">ذرّات الحكمة</p>

        <p class="step-description" id="stepDesc">
          Like atoms forming molecules, verses coalesce into meaning—each word
          a particle in the vast field of human experience, connecting poets
          across centuries.
        </p>
        <p class="step-description-ar" id="stepDescAr">
          الكلمات تتصل عبر الأزمان
        </p>

        <div class="progress-chain">
          <div class="progress-dot active"></div>
          <div class="progress-line"></div>
          <div class="progress-dot"></div>
          <div class="progress-line"></div>
          <div class="progress-dot"></div>
          <div class="progress-line"></div>
          <div class="progress-dot"></div>
        </div>

        <div class="nav-buttons">
          <button class="nav-button" onclick="prevStep()" id="prevBtn" style="display: none;">
            Previous
          </button>
          <button class="nav-button primary" onclick="nextStep()" id="nextBtn">
            Continue
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Panel -->
  <div class="info-panel">
    <h3>Enhanced Particle Field</h3>
    <ul>
      <li><strong>Voice:</strong> Arabic poetry professor</li>
      <li><strong>Theme:</strong> Verses as particles through time</li>
      <li><strong>Features:</strong> Physics-based animations</li>
      <li><strong>Walkthrough:</strong> 4 steps with particle effects</li>
    </ul>
  </div>

  <script>
    // Particle system for splash screen
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const particles = [];
    const particleCount = 800;

    class Particle {
      constructor(x, y) {
        this.originX = x;
        this.originY = y;
        this.x = x;
        this.y = y;
        this.vx = (Math.random() - 0.5) * 0.2;
        this.vy = (Math.random() - 0.5) * 0.2;
        this.radius = Math.random() * 1.5 + 0.5;
        this.opacity = Math.random() * 0.4 + 0.3;
      }

      update(mouseX, mouseY) {
        // Mouse repulsion
        const dx = this.x - mouseX;
        const dy = this.y - mouseY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        if (distance < 100) {
          const force = (100 - distance) / 100;
          this.vx += (dx / distance) * force * 0.5;
          this.vy += (dy / distance) * force * 0.5;
        }

        // Pull back to origin
        this.vx += (this.originX - this.x) * 0.01;
        this.vy += (this.originY - this.y) * 0.01;

        // Update position
        this.x += this.vx;
        this.y += this.vy;

        // Damping
        this.vx *= 0.98;
        this.vy *= 0.98;
      }

      draw() {
        ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // Create particles in calligraphic shape
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    for (let i = 0; i < particleCount; i++) {
      const angle = Math.random() * Math.PI * 2;
      const radius = Math.random() * 150 + 50;
      const x = centerX + Math.cos(angle) * radius + (Math.random() - 0.5) * 100;
      const y = centerY + Math.sin(angle) * radius + (Math.random() - 0.5) * 100;
      particles.push(new Particle(x, y));
    }

    let mouseX = canvas.width / 2;
    let mouseY = canvas.height / 2;

    window.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    function animate() {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      particles.forEach(particle => {
        particle.update(mouseX, mouseY);
        particle.draw();
      });

      requestAnimationFrame(animate);
    }

    animate();

    // Walkthrough functionality
    const steps = [
      {
        title: "Particles of Wisdom",
        titleAr: "ذرّات الحكمة",
        desc: "Like atoms forming molecules, verses coalesce into meaning—each word a particle in the vast field of human experience, connecting poets across centuries.",
        descAr: "الكلمات تتصل عبر الأزمان"
      },
      {
        title: "The Quantum Nature of Poetry",
        titleAr: "طبيعة الشعر الكمّية",
        desc: "Ancient scholars understood: poetry exists in superposition until observed. Each reading collapses infinite meanings into one lived moment of understanding.",
        descAr: "معانٍ لا نهائية في لحظة واحدة"
      },
      {
        title: "Fields of Resonance",
        titleAr: "حقول الرنين",
        desc: "Poets do not write in isolation. They disturb the field, sending ripples through time. You feel echoes of verses written a millennium ago, still vibrating.",
        descAr: "أصداء عبر ألف عام"
      },
      {
        title: "The Interconnected Archive",
        titleAr: "الأرشيف المترابط",
        desc: "Navigate this living constellation. Each verse is a node, each poet a gravitational center. Touch one, and you feel the pull of all the others.",
        descAr: "كل بيت عقدة، كل شاعر مركز جاذبية"
      }
    ];

    let currentStep = 0;

    function showWalkthrough() {
      document.getElementById('walkthrough').classList.add('active');
      updateWalkthrough();
    }

    function closeWalkthrough() {
      document.getElementById('walkthrough').classList.remove('active');
    }

    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        updateWalkthrough();
      } else {
        closeWalkthrough();
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        updateWalkthrough();
      }
    }

    function updateWalkthrough() {
      const step = steps[currentStep];
      document.getElementById('stepTitle').textContent = step.title;
      document.getElementById('stepTitleAr').textContent = step.titleAr;
      document.getElementById('stepDesc').textContent = step.desc;
      document.getElementById('stepDescAr').textContent = step.descAr;

      // Update buttons
      document.getElementById('prevBtn').style.display = currentStep > 0 ? 'block' : 'none';
      document.getElementById('nextBtn').textContent = currentStep < steps.length - 1 ? 'Continue' : 'Enter the Field';

      // Update progress dots
      const dots = document.querySelectorAll('.progress-dot');
      const lines = document.querySelectorAll('.progress-line');

      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentStep);
      });

      lines.forEach((line, i) => {
        line.classList.toggle('filled', i < currentStep);
      });
    }

    // Resize handling
    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
